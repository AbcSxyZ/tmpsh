# definition shell grammar

STMT:
	STMT STMT
	QUOTES

CMD:
	NEW_LINE
	STMT
	SUB_PROCESS
	CMD TERMINATOR
	CMD NEW_LINE
	REDIRECTION_FILENAME
	REDIRECTION_FD
	CMD_BINAIRE
	CMD CMD


ESCAPE:
	\

ASSIGNATION:
	STMT ASSIGNATION_EQUAL
	STMT CONCATENATION

ASSIGNATION_EQUAL:
	=

CONCATENATION:
	+=

TERMINATOR:
	BACKGROUND_JOBS
	END_COMMAND
	NEW_LINE

BACKGROUND_JOBS
	&

END_COMMAND:
	;

# Must be hardcode...
# NEW_LINE:
# 	\n

CMD_BINAIRE:
	CMD PIPE CMD
	CMD CMDAND CMD
	CMD CMDOR CMD

PIPE:
	|

CMDAND:
	&&

CMDOR:
	||

REDIRECTION_FILENAME:
	STMT APPEND STMT
	STMT TRUNC STMT
	STMT HEREDOC STMT
	STMT READ_FROM STMT

APPEND:
	>>

TRUNC:
	>

HEREDOC:
	<<

READ_FROM:
	<

REDIRECTION_FD:
	STMT TRUNC_TO STMT
	STMT READ_FROM_FD STMT

TRUNC_TO:
	>&

READ_FROM_FD:
	<&

SUB_PROCESS:
	BRACEPARAM CMD END_BRACE
	SUBSH CMD END_BRACKET
	CURSH CMD END_BRACE
	CMDSUBST1 CMD END_BRACKET
	CMDSUBST2 CMD END_BRACKET
	CMDSUBST3 CMD END_BRACKET

BRACEPARAM: # FILE_SUBSTITUTION
	${

CMDSUBST1: # STDIN_SUBSTITUTION
	$(

CURSH: # GROUP_COMMAND
	{

SUBSH: # SUBSHELL_BLOCK
	(

CMDSUBST2: # COMMAND_SUBSTITUTION
	>(

CMDSUBST3: # VARIABLE_EXPANSION
	<(

QUOTES:
	DQUOTES STMT DQUOTES
	QUOTE STMT QUOTE

DQUOTES:
	"

QUOTE:
	'

END_BRACKET:
	)

END_BRACE:
	}
