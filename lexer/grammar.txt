# definition shell grammar

STMT:
	STMT
	QUOTES

CMD:
	NEW_LINE
	STMT
	SUB_PROCESS
	CMD TERMINATOR
	CMD NEW_LINE
	REDIRECTION_FILENAME
	REDIRECTION_FD
	CMD_BINAIRE
	ASSIGNATION
	CMD CMD

ESCAPE:
	\

ASSIGNATION:
	CMD ASSIGNATION_EQUAL
	CMD CONCATENATION

ASSIGNATION_EQUAL:
	=

CONCATENATION:
	+=

TERMINATOR:
	BACKGROUND_JOBS
	END_COMMAND
	NEW_LINE

BACKGROUND_JOBS
	&

END_COMMAND:
	;

# Must be hardcode...
# NEW_LINE:
# 	\n

CMD_BINAIRE:
	CMD PIPE CMD
	CMD CMDAND CMD
	CMD CMDOR CMD

PIPE:
	|

CMDAND:
	&&

CMDOR:
	||

REDIRECTION_FILENAME:
	 APPEND CMD
	 TRUNC CMD
	 HEREDOC CMD
	 READ_FROM CMD

APPEND:
	>>

TRUNC:
	>

HEREDOC:
	<<

READ_FROM:
	<

REDIRECTION_FD:
	TRUNC_TO_FD CMD
	READ_FROM_FD CMD

TRUNC_TO_FD:
	>&

READ_FROM_FD:
	<&

SUB_PROCESS:
	BRACEPARAM CMD END_BRACE
	BRACEPARAM END_BRACE
	SUBSH CMD END_BRACKET
	SUBSH END_BRACKET
	CURSH CMD END_BRACE
	CURSH END_BRACE
	CMDSUBST1 CMD END_BRACKET
	CMDSUBST1 END_BRACKET
	CMDSUBST2 CMD END_BRACKET
	CMDSUBST2 END_BRACKET
	CMDSUBST3 CMD END_BRACKET
	CMDSUBST3 END_BRACKET

BRACEPARAM: # FILE_SUBSTITUTION
	${

CMDSUBST1: # STDIN_SUBSTITUTION
	$(

CURSH: # GROUP_COMMAND
	{

SUBSH: # SUBSHELL_BLOCK
	(

CMDSUBST2: # COMMAND_SUBSTITUTION
	>(

CMDSUBST3: # VARIABLE_EXPANSION
	<(

QUOTES:
	DQUOTES CMD DQUOTES
	DQUOTES DQUOTES
	QUOTE CMD QUOTE
	QUOTE QUOTE

DQUOTES:
	"

QUOTE:
	'

END_BRACKET:
	)

END_BRACE:
	}
